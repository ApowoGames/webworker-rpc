!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=20)}([function(e,t,r){var o,n,i;n=[r(4)],void 0===(i="function"==typeof(o=function(e){"use strict";var t,r,o,n=e.Reader,i=e.Writer,a=e.util,s=e.roots.default||(e.roots.default={});return s.webworker_rpc=((o={}).MSG_ERR=(t={},(r=Object.create(t))[t[0]="OK"]=0,r),o.Executor=function(){function t(e){if(this.params=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.method="",t.prototype.context="",t.prototype.params=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=i.create()),t.uint32(10).string(e.method),null!=e.context&&Object.hasOwnProperty.call(e,"context")&&t.uint32(18).string(e.context),null!=e.params&&e.params.length)for(var r=0;r<e.params.length;++r)s.webworker_rpc.Param.encode(e.params[r],t.uint32(26).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new s.webworker_rpc.Executor;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.method=e.string();break;case 2:o.context=e.string();break;case 3:o.params&&o.params.length||(o.params=[]),o.params.push(s.webworker_rpc.Param.decode(e,e.uint32()));break;default:e.skipType(7&i)}}if(!o.hasOwnProperty("method"))throw a.ProtocolError("missing required 'method'",{instance:o});return o},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!a.isString(e.method))return"method: string expected";if(null!=e.context&&e.hasOwnProperty("context")&&!a.isString(e.context))return"context: string expected";if(null!=e.params&&e.hasOwnProperty("params")){if(!Array.isArray(e.params))return"params: array expected";for(var t=0;t<e.params.length;++t){var r=s.webworker_rpc.Param.verify(e.params[t]);if(r)return"params."+r}}return null},t.fromObject=function(e){if(e instanceof s.webworker_rpc.Executor)return e;var t=new s.webworker_rpc.Executor;if(null!=e.method&&(t.method=String(e.method)),null!=e.context&&(t.context=String(e.context)),e.params){if(!Array.isArray(e.params))throw TypeError(".webworker_rpc.Executor.params: array expected");t.params=[];for(var r=0;r<e.params.length;++r){if("object"!=typeof e.params[r])throw TypeError(".webworker_rpc.Executor.params: object expected");t.params[r]=s.webworker_rpc.Param.fromObject(e.params[r])}}return t},t.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.params=[]),t.defaults&&(r.method="",r.context=""),null!=e.method&&e.hasOwnProperty("method")&&(r.method=e.method),null!=e.context&&e.hasOwnProperty("context")&&(r.context=e.context),e.params&&e.params.length){r.params=[];for(var o=0;o<e.params.length;++o)r.params[o]=s.webworker_rpc.Param.toObject(e.params[o],t)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),o.Param=function(){function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var r;return t.prototype.t=0,t.prototype.valStr="",t.prototype.valBool=!1,t.prototype.valNum=0,t.prototype.valBytes=a.newBuffer([]),t.prototype.valExecutor=null,Object.defineProperty(t.prototype,"val",{get:a.oneOfGetter(r=["valStr","valBool","valNum","valBytes","valExecutor"]),set:a.oneOfSetter(r)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=i.create()),t.uint32(8).int32(e.t),null!=e.valStr&&Object.hasOwnProperty.call(e,"valStr")&&t.uint32(18).string(e.valStr),null!=e.valBool&&Object.hasOwnProperty.call(e,"valBool")&&t.uint32(24).bool(e.valBool),null!=e.valNum&&Object.hasOwnProperty.call(e,"valNum")&&t.uint32(32).int32(e.valNum),null!=e.valBytes&&Object.hasOwnProperty.call(e,"valBytes")&&t.uint32(42).bytes(e.valBytes),null!=e.valExecutor&&Object.hasOwnProperty.call(e,"valExecutor")&&s.webworker_rpc.Executor.encode(e.valExecutor,t.uint32(50).fork()).ldelim(),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new s.webworker_rpc.Param;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.t=e.int32();break;case 2:o.valStr=e.string();break;case 3:o.valBool=e.bool();break;case 4:o.valNum=e.int32();break;case 5:o.valBytes=e.bytes();break;case 6:o.valExecutor=s.webworker_rpc.Executor.decode(e,e.uint32());break;default:e.skipType(7&i)}}if(!o.hasOwnProperty("t"))throw a.ProtocolError("missing required 't'",{instance:o});return o},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};switch(e.t){default:return"t: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:}if(null!=e.valStr&&e.hasOwnProperty("valStr")&&(t.val=1,!a.isString(e.valStr)))return"valStr: string expected";if(null!=e.valBool&&e.hasOwnProperty("valBool")){if(1===t.val)return"val: multiple values";if(t.val=1,"boolean"!=typeof e.valBool)return"valBool: boolean expected"}if(null!=e.valNum&&e.hasOwnProperty("valNum")){if(1===t.val)return"val: multiple values";if(t.val=1,!a.isInteger(e.valNum))return"valNum: integer expected"}if(null!=e.valBytes&&e.hasOwnProperty("valBytes")){if(1===t.val)return"val: multiple values";if(t.val=1,!(e.valBytes&&"number"==typeof e.valBytes.length||a.isString(e.valBytes)))return"valBytes: buffer expected"}if(null!=e.valExecutor&&e.hasOwnProperty("valExecutor")){if(1===t.val)return"val: multiple values";t.val=1;var r=s.webworker_rpc.Executor.verify(e.valExecutor);if(r)return"valExecutor."+r}return null},t.fromObject=function(e){if(e instanceof s.webworker_rpc.Param)return e;var t=new s.webworker_rpc.Param;switch(e.t){case"UNKNOWN":case 0:t.t=0;break;case"str":case 1:t.t=1;break;case"boolean":case 2:t.t=2;break;case"num":case 3:t.t=3;break;case"unit8array":case 4:t.t=4;break;case"executor":case 5:t.t=5}if(null!=e.valStr&&(t.valStr=String(e.valStr)),null!=e.valBool&&(t.valBool=Boolean(e.valBool)),null!=e.valNum&&(t.valNum=0|e.valNum),null!=e.valBytes&&("string"==typeof e.valBytes?a.base64.decode(e.valBytes,t.valBytes=a.newBuffer(a.base64.length(e.valBytes)),0):e.valBytes.length&&(t.valBytes=e.valBytes)),null!=e.valExecutor){if("object"!=typeof e.valExecutor)throw TypeError(".webworker_rpc.Param.valExecutor: object expected");t.valExecutor=s.webworker_rpc.Executor.fromObject(e.valExecutor)}return t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.t=t.enums===String?"UNKNOWN":0),null!=e.t&&e.hasOwnProperty("t")&&(r.t=t.enums===String?s.webworker_rpc.ParamType[e.t]:e.t),null!=e.valStr&&e.hasOwnProperty("valStr")&&(r.valStr=e.valStr,t.oneofs&&(r.val="valStr")),null!=e.valBool&&e.hasOwnProperty("valBool")&&(r.valBool=e.valBool,t.oneofs&&(r.val="valBool")),null!=e.valNum&&e.hasOwnProperty("valNum")&&(r.valNum=e.valNum,t.oneofs&&(r.val="valNum")),null!=e.valBytes&&e.hasOwnProperty("valBytes")&&(r.valBytes=t.bytes===String?a.base64.encode(e.valBytes,0,e.valBytes.length):t.bytes===Array?Array.prototype.slice.call(e.valBytes):e.valBytes,t.oneofs&&(r.val="valBytes")),null!=e.valExecutor&&e.hasOwnProperty("valExecutor")&&(r.valExecutor=s.webworker_rpc.Executor.toObject(e.valExecutor,t),t.oneofs&&(r.val="valExecutor")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),o.ParamType=function(){var e={},t=Object.create(e);return t[e[0]="UNKNOWN"]=0,t[e[1]="str"]=1,t[e[2]="boolean"]=2,t[e[3]="num"]=3,t[e[4]="unit8array"]=4,t[e[5]="executor"]=5,t}(),o.Header=function(){function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.serviceName="",t.prototype.error=0,t.prototype.remoteExecutor=null,t.prototype.callbackExecutor=null,t.prototype.bodyLen=0,t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=i.create()),t.uint32(10).string(e.serviceName),t.uint32(16).int32(e.error),s.webworker_rpc.Executor.encode(e.remoteExecutor,t.uint32(26).fork()).ldelim(),null!=e.callbackExecutor&&Object.hasOwnProperty.call(e,"callbackExecutor")&&s.webworker_rpc.Executor.encode(e.callbackExecutor,t.uint32(34).fork()).ldelim(),null!=e.bodyLen&&Object.hasOwnProperty.call(e,"bodyLen")&&t.uint32(40).int32(e.bodyLen),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new s.webworker_rpc.Header;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.serviceName=e.string();break;case 2:o.error=e.int32();break;case 3:o.remoteExecutor=s.webworker_rpc.Executor.decode(e,e.uint32());break;case 4:o.callbackExecutor=s.webworker_rpc.Executor.decode(e,e.uint32());break;case 5:o.bodyLen=e.int32();break;default:e.skipType(7&i)}}if(!o.hasOwnProperty("serviceName"))throw a.ProtocolError("missing required 'serviceName'",{instance:o});if(!o.hasOwnProperty("error"))throw a.ProtocolError("missing required 'error'",{instance:o});if(!o.hasOwnProperty("remoteExecutor"))throw a.ProtocolError("missing required 'remoteExecutor'",{instance:o});return o},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!a.isString(e.serviceName))return"serviceName: string expected";switch(e.error){default:return"error: enum value expected";case 0:}var t;return(t=s.webworker_rpc.Executor.verify(e.remoteExecutor))?"remoteExecutor."+t:null!=e.callbackExecutor&&e.hasOwnProperty("callbackExecutor")&&(t=s.webworker_rpc.Executor.verify(e.callbackExecutor))?"callbackExecutor."+t:null!=e.bodyLen&&e.hasOwnProperty("bodyLen")&&!a.isInteger(e.bodyLen)?"bodyLen: integer expected":null},t.fromObject=function(e){if(e instanceof s.webworker_rpc.Header)return e;var t=new s.webworker_rpc.Header;switch(null!=e.serviceName&&(t.serviceName=String(e.serviceName)),e.error){case"OK":case 0:t.error=0}if(null!=e.remoteExecutor){if("object"!=typeof e.remoteExecutor)throw TypeError(".webworker_rpc.Header.remoteExecutor: object expected");t.remoteExecutor=s.webworker_rpc.Executor.fromObject(e.remoteExecutor)}if(null!=e.callbackExecutor){if("object"!=typeof e.callbackExecutor)throw TypeError(".webworker_rpc.Header.callbackExecutor: object expected");t.callbackExecutor=s.webworker_rpc.Executor.fromObject(e.callbackExecutor)}return null!=e.bodyLen&&(t.bodyLen=0|e.bodyLen),t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.serviceName="",r.error=t.enums===String?"OK":0,r.remoteExecutor=null,r.callbackExecutor=null,r.bodyLen=0),null!=e.serviceName&&e.hasOwnProperty("serviceName")&&(r.serviceName=e.serviceName),null!=e.error&&e.hasOwnProperty("error")&&(r.error=t.enums===String?s.webworker_rpc.MSG_ERR[e.error]:e.error),null!=e.remoteExecutor&&e.hasOwnProperty("remoteExecutor")&&(r.remoteExecutor=s.webworker_rpc.Executor.toObject(e.remoteExecutor,t)),null!=e.callbackExecutor&&e.hasOwnProperty("callbackExecutor")&&(r.callbackExecutor=s.webworker_rpc.Executor.toObject(e.callbackExecutor,t)),null!=e.bodyLen&&e.hasOwnProperty("bodyLen")&&(r.bodyLen=e.bodyLen),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),o.ExecutePacket=function(){function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.header=null,t.prototype.body=a.newBuffer([]),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=i.create()),s.webworker_rpc.Header.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(18).bytes(e.body),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new s.webworker_rpc.ExecutePacket;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.header=s.webworker_rpc.Header.decode(e,e.uint32());break;case 2:o.body=e.bytes();break;default:e.skipType(7&i)}}if(!o.hasOwnProperty("header"))throw a.ProtocolError("missing required 'header'",{instance:o});return o},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t=s.webworker_rpc.Header.verify(e.header);return t?"header."+t:null!=e.body&&e.hasOwnProperty("body")&&!(e.body&&"number"==typeof e.body.length||a.isString(e.body))?"body: buffer expected":null},t.fromObject=function(e){if(e instanceof s.webworker_rpc.ExecutePacket)return e;var t=new s.webworker_rpc.ExecutePacket;if(null!=e.header){if("object"!=typeof e.header)throw TypeError(".webworker_rpc.ExecutePacket.header: object expected");t.header=s.webworker_rpc.Header.fromObject(e.header)}return null!=e.body&&("string"==typeof e.body?a.base64.decode(e.body,t.body=a.newBuffer(a.base64.length(e.body)),0):e.body.length&&(t.body=e.body)),t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.header=null,t.bytes===String?r.body="":(r.body=[],t.bytes!==Array&&(r.body=a.newBuffer(r.body)))),null!=e.header&&e.hasOwnProperty("header")&&(r.header=s.webworker_rpc.Header.toObject(e.header,t)),null!=e.body&&e.hasOwnProperty("body")&&(r.body=t.bytes===String?a.base64.encode(e.body,0,e.body.length):t.bytes===Array?Array.prototype.slice.call(e.body):e.body),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),o.RegistryPacket=function(){function t(e){if(this.executors=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return t.prototype.serviceName="",t.prototype.executors=a.emptyArray,t.create=function(e){return new t(e)},t.encode=function(e,t){if(t||(t=i.create()),t.uint32(10).string(e.serviceName),null!=e.executors&&e.executors.length)for(var r=0;r<e.executors.length;++r)s.webworker_rpc.Executor.encode(e.executors[r],t.uint32(18).fork()).ldelim();return t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new s.webworker_rpc.RegistryPacket;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.serviceName=e.string();break;case 2:o.executors&&o.executors.length||(o.executors=[]),o.executors.push(s.webworker_rpc.Executor.decode(e,e.uint32()));break;default:e.skipType(7&i)}}if(!o.hasOwnProperty("serviceName"))throw a.ProtocolError("missing required 'serviceName'",{instance:o});return o},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(!a.isString(e.serviceName))return"serviceName: string expected";if(null!=e.executors&&e.hasOwnProperty("executors")){if(!Array.isArray(e.executors))return"executors: array expected";for(var t=0;t<e.executors.length;++t){var r=s.webworker_rpc.Executor.verify(e.executors[t]);if(r)return"executors."+r}}return null},t.fromObject=function(e){if(e instanceof s.webworker_rpc.RegistryPacket)return e;var t=new s.webworker_rpc.RegistryPacket;if(null!=e.serviceName&&(t.serviceName=String(e.serviceName)),e.executors){if(!Array.isArray(e.executors))throw TypeError(".webworker_rpc.RegistryPacket.executors: array expected");t.executors=[];for(var r=0;r<e.executors.length;++r){if("object"!=typeof e.executors[r])throw TypeError(".webworker_rpc.RegistryPacket.executors: object expected");t.executors[r]=s.webworker_rpc.Executor.fromObject(e.executors[r])}}return t},t.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.executors=[]),t.defaults&&(r.serviceName=""),null!=e.serviceName&&e.hasOwnProperty("serviceName")&&(r.serviceName=e.serviceName),e.executors&&e.executors.length){r.executors=[];for(var o=0;o<e.executors.length;++o)r.executors[o]=s.webworker_rpc.Executor.toObject(e.executors[o],t)}return r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),o.WebWorkerMessage=function(){function t(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}var r;return t.prototype.key="",t.prototype.dataExecute=null,t.prototype.dataRegistry=null,Object.defineProperty(t.prototype,"data",{get:a.oneOfGetter(r=["dataExecute","dataRegistry"]),set:a.oneOfSetter(r)}),t.create=function(e){return new t(e)},t.encode=function(e,t){return t||(t=i.create()),t.uint32(10).string(e.key),null!=e.dataExecute&&Object.hasOwnProperty.call(e,"dataExecute")&&s.webworker_rpc.ExecutePacket.encode(e.dataExecute,t.uint32(18).fork()).ldelim(),null!=e.dataRegistry&&Object.hasOwnProperty.call(e,"dataRegistry")&&s.webworker_rpc.RegistryPacket.encode(e.dataRegistry,t.uint32(26).fork()).ldelim(),t},t.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},t.decode=function(e,t){e instanceof n||(e=n.create(e));for(var r=void 0===t?e.len:e.pos+t,o=new s.webworker_rpc.WebWorkerMessage;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:o.key=e.string();break;case 2:o.dataExecute=s.webworker_rpc.ExecutePacket.decode(e,e.uint32());break;case 3:o.dataRegistry=s.webworker_rpc.RegistryPacket.decode(e,e.uint32());break;default:e.skipType(7&i)}}if(!o.hasOwnProperty("key"))throw a.ProtocolError("missing required 'key'",{instance:o});return o},t.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},t.verify=function(e){if("object"!=typeof e||null===e)return"object expected";var t={};if(!a.isString(e.key))return"key: string expected";if(null!=e.dataExecute&&e.hasOwnProperty("dataExecute")&&(t.data=1,r=s.webworker_rpc.ExecutePacket.verify(e.dataExecute)))return"dataExecute."+r;if(null!=e.dataRegistry&&e.hasOwnProperty("dataRegistry")){if(1===t.data)return"data: multiple values";var r;if(t.data=1,r=s.webworker_rpc.RegistryPacket.verify(e.dataRegistry))return"dataRegistry."+r}return null},t.fromObject=function(e){if(e instanceof s.webworker_rpc.WebWorkerMessage)return e;var t=new s.webworker_rpc.WebWorkerMessage;if(null!=e.key&&(t.key=String(e.key)),null!=e.dataExecute){if("object"!=typeof e.dataExecute)throw TypeError(".webworker_rpc.WebWorkerMessage.dataExecute: object expected");t.dataExecute=s.webworker_rpc.ExecutePacket.fromObject(e.dataExecute)}if(null!=e.dataRegistry){if("object"!=typeof e.dataRegistry)throw TypeError(".webworker_rpc.WebWorkerMessage.dataRegistry: object expected");t.dataRegistry=s.webworker_rpc.RegistryPacket.fromObject(e.dataRegistry)}return t},t.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.key=""),null!=e.key&&e.hasOwnProperty("key")&&(r.key=e.key),null!=e.dataExecute&&e.hasOwnProperty("dataExecute")&&(r.dataExecute=s.webworker_rpc.ExecutePacket.toObject(e.dataExecute,t),t.oneofs&&(r.data="dataExecute")),null!=e.dataRegistry&&e.hasOwnProperty("dataRegistry")&&(r.dataRegistry=s.webworker_rpc.RegistryPacket.toObject(e.dataRegistry,t),t.oneofs&&(r.data="dataRegistry")),r},t.prototype.toJSON=function(){return this.constructor.toObject(this,e.util.toJSONOptions)},t}(),o),s})?o.apply(t,n):o)||(e.exports=i)},function(e,t,r){"use strict";(function(e){var o=t;function n(e,t,r){for(var o=Object.keys(t),n=0;n<o.length;++n)void 0!==e[o[n]]&&r||(e[o[n]]=t[o[n]]);return e}function i(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}o.asPromise=r(7),o.base64=r(8),o.EventEmitter=r(9),o.float=r(10),o.inquire=r(11),o.utf8=r(12),o.pool=r(13),o.LongBits=r(14),o.isNode=Boolean(void 0!==e&&e&&e.process&&e.process.versions&&e.process.versions.node),o.global=o.isNode&&e||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},o.isString=function(e){return"string"==typeof e||e instanceof String},o.isObject=function(e){return e&&"object"==typeof e},o.isset=o.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},o.Buffer=function(){try{var e=o.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(e){return"number"==typeof e?o.Buffer?o._Buffer_allocUnsafe(e):new o.Array(e):o.Buffer?o._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},o.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(e){return e?o.LongBits.from(e).toHash():o.LongBits.zeroHash},o.longFromHash=function(e,t){var r=o.LongBits.fromHash(e);return o.Long?o.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},o.merge=n,o.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},o.newError=i,o.ProtocolError=i("ProtocolError"),o.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},o.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var e=o.Buffer;e?(o._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},o._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):o._Buffer_from=o._Buffer_allocUnsafe=null}}).call(this,r(6))},function(e,t,r){"use strict";e.exports=f;var o,n=r(1),i=n.LongBits,a=n.base64,s=n.utf8;function c(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function l(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function f(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var p=function(){return n.Buffer?function(){return(f.create=function(){return new o})()}:function(){return new f}};function h(e,t,r){t[r]=255&e}function y(e,t){this.len=e,this.next=void 0,this.val=t}function d(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function w(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}f.create=p(),f.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(f.alloc=n.pool(f.alloc,n.Array.prototype.subarray)),f.prototype._push=function(e,t,r){return this.tail=this.tail.next=new c(e,t,r),this.len+=t,this},y.prototype=Object.create(c.prototype),y.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},f.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new y((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},f.prototype.int32=function(e){return e<0?this._push(d,10,i.fromNumber(e)):this.uint32(e)},f.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},f.prototype.uint64=function(e){var t=i.from(e);return this._push(d,t.length(),t)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(e){var t=i.from(e).zzEncode();return this._push(d,t.length(),t)},f.prototype.bool=function(e){return this._push(h,1,e?1:0)},f.prototype.fixed32=function(e){return this._push(w,4,e>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(e){var t=i.from(e);return this._push(w,4,t.lo)._push(w,4,t.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},f.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var b=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var o=0;o<e.length;++o)t[r+o]=e[o]};f.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(h,1,0);if(n.isString(e)){var r=f.alloc(t=a.length(e));a.decode(e,r,0),e=r}return this.uint32(t)._push(b,t,e)},f.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(h,1,0)},f.prototype.fork=function(){return this.states=new l(this),this.head=this.tail=new c(u,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},f.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},f.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},f._configure=function(e){o=e,f.create=p(),o._configure()}},function(e,t,r){"use strict";e.exports=c;var o,n=r(1),i=n.LongBits,a=n.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function c(e){this.buf=e,this.pos=0,this.len=e.length}var u,l="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new c(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new c(e);throw Error("illegal buffer")},f=function(){return n.Buffer?function(e){return(c.create=function(e){return n.Buffer.isBuffer(e)?new o(e):l(e)})(e)}:l};function p(){var e=new i(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function h(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function y(){if(this.pos+8>this.len)throw s(this,8);return new i(h(this.buf,this.pos+=4),h(this.buf,this.pos+=4))}c.create=f(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return h(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|h(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},c.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},c.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},c.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},c.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},c._configure=function(e){o=e,c.create=f(),o._configure();var t=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return p.call(this)[t](!1)},uint64:function(){return p.call(this)[t](!0)},sint64:function(){return p.call(this).zzDecode()[t](!1)},fixed64:function(){return y.call(this)[t](!0)},sfixed64:function(){return y.call(this)[t](!1)}})}},function(e,t,r){"use strict";e.exports=r(5)},function(e,t,r){"use strict";var o=t;function n(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}o.build="minimal",o.Writer=r(2),o.BufferWriter=r(15),o.Reader=r(3),o.BufferReader=r(16),o.util=r(1),o.rpc=r(17),o.roots=r(19),o.configure=n,n()},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";e.exports=function(e,t){var r=new Array(arguments.length-1),o=0,n=2,i=!0;for(;n<arguments.length;)r[o++]=arguments[n++];return new Promise((function(n,a){r[o]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}};try{e.apply(t||null,r)}catch(e){i&&(i=!1,a(e))}}))}},function(e,t,r){"use strict";var o=t;o.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=new Array(64),i=new Array(123),a=0;a<64;)i[n[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;o.encode=function(e,t,r){for(var o,i=null,a=[],s=0,c=0;t<r;){var u=e[t++];switch(c){case 0:a[s++]=n[u>>2],o=(3&u)<<4,c=1;break;case 1:a[s++]=n[o|u>>4],o=(15&u)<<2,c=2;break;case 2:a[s++]=n[o|u>>6],a[s++]=n[63&u],c=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=n[o],a[s++]=61,1===c&&(a[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,a.slice(0,s))),i.join("")):String.fromCharCode.apply(String,a.slice(0,s))};o.decode=function(e,t,r){for(var o,n=r,a=0,s=0;s<e.length;){var c=e.charCodeAt(s++);if(61===c&&a>1)break;if(void 0===(c=i[c]))throw Error("invalid encoding");switch(a){case 0:o=c,a=1;break;case 1:t[r++]=o<<2|(48&c)>>4,o=c,a=2;break;case 2:t[r++]=(15&o)<<4|(60&c)>>2,o=c,a=3;break;case 3:t[r++]=(3&o)<<6|c,a=0}}if(1===a)throw Error("invalid encoding");return r-n},o.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},function(e,t,r){"use strict";function o(){this._listeners={}}e.exports=o,o.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},o.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],o=0;o<r.length;)r[o].fn===t?r.splice(o,1):++o;return this},o.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],o=1;o<arguments.length;)r.push(arguments[o++]);for(o=0;o<t.length;)t[o].fn.apply(t[o++].ctx,r)}return this}},function(e,t,r){"use strict";function o(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),o=128===r[3];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3]}function i(e,o,n){t[0]=e,o[n]=r[3],o[n+1]=r[2],o[n+2]=r[1],o[n+3]=r[0]}function a(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],t[0]}function s(e,o){return r[3]=e[o],r[2]=e[o+1],r[1]=e[o+2],r[0]=e[o+3],t[0]}e.writeFloatLE=o?n:i,e.writeFloatBE=o?i:n,e.readFloatLE=o?a:s,e.readFloatBE=o?s:a}():function(){function t(e,t,r,o){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,o);else if(isNaN(t))e(2143289344,r,o);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,o);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,o);else{var i=Math.floor(Math.log(t)/Math.LN2);e((n<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,o)}}function r(e,t,r){var o=e(t,r),n=2*(o>>31)+1,i=o>>>23&255,a=8388607&o;return 255===i?a?NaN:n*(1/0):0===i?1401298464324817e-60*n*a:n*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,n),e.writeFloatBE=t.bind(null,i),e.readFloatLE=r.bind(null,a),e.readFloatBE=r.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),o=128===r[7];function n(e,o,n){t[0]=e,o[n]=r[0],o[n+1]=r[1],o[n+2]=r[2],o[n+3]=r[3],o[n+4]=r[4],o[n+5]=r[5],o[n+6]=r[6],o[n+7]=r[7]}function i(e,o,n){t[0]=e,o[n]=r[7],o[n+1]=r[6],o[n+2]=r[5],o[n+3]=r[4],o[n+4]=r[3],o[n+5]=r[2],o[n+6]=r[1],o[n+7]=r[0]}function a(e,o){return r[0]=e[o],r[1]=e[o+1],r[2]=e[o+2],r[3]=e[o+3],r[4]=e[o+4],r[5]=e[o+5],r[6]=e[o+6],r[7]=e[o+7],t[0]}function s(e,o){return r[7]=e[o],r[6]=e[o+1],r[5]=e[o+2],r[4]=e[o+3],r[3]=e[o+4],r[2]=e[o+5],r[1]=e[o+6],r[0]=e[o+7],t[0]}e.writeDoubleLE=o?n:i,e.writeDoubleBE=o?i:n,e.readDoubleLE=o?a:s,e.readDoubleBE=o?s:a}():function(){function t(e,t,r,o,n,i){var a=o<0?1:0;if(a&&(o=-o),0===o)e(0,n,i+t),e(1/o>0?0:2147483648,n,i+r);else if(isNaN(o))e(0,n,i+t),e(2146959360,n,i+r);else if(o>17976931348623157e292)e(0,n,i+t),e((a<<31|2146435072)>>>0,n,i+r);else{var s;if(o<22250738585072014e-324)e((s=o/5e-324)>>>0,n,i+t),e((a<<31|s/4294967296)>>>0,n,i+r);else{var c=Math.floor(Math.log(o)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=o*Math.pow(2,-c))>>>0,n,i+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,n,i+r)}}}function r(e,t,r,o,n){var i=e(o,n+t),a=e(o,n+r),s=2*(a>>31)+1,c=a>>>20&2047,u=4294967296*(1048575&a)+i;return 2047===c?u?NaN:s*(1/0):0===c?5e-324*s*u:s*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,n,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=r.bind(null,a,0,4),e.readDoubleBE=r.bind(null,s,4,0)}(),e}function n(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=o(o)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(e,t,r){"use strict";var o=t;o.length=function(e){for(var t=0,r=0,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(o+1))?(++o,t+=4):t+=3;return t},o.read=function(e,t,r){if(r-t<1)return"";for(var o,n=null,i=[],a=0;t<r;)(o=e[t++])<128?i[a++]=o:o>191&&o<224?i[a++]=(31&o)<<6|63&e[t++]:o>239&&o<365?(o=((7&o)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(o>>10),i[a++]=56320+(1023&o)):i[a++]=(15&o)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,i)),a=0);return n?(a&&n.push(String.fromCharCode.apply(String,i.slice(0,a))),n.join("")):String.fromCharCode.apply(String,i.slice(0,a))},o.write=function(e,t,r){for(var o,n,i=r,a=0;a<e.length;++a)(o=e.charCodeAt(a))<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):55296==(64512&o)&&56320==(64512&(n=e.charCodeAt(a+1)))?(o=65536+((1023&o)<<10)+(1023&n),++a,t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128);return r-i}},function(e,t,r){"use strict";e.exports=function(e,t,r){var o=r||8192,n=o>>>1,i=null,a=o;return function(r){if(r<1||r>n)return e(r);a+r>o&&(i=e(o),a=0);var s=t.call(i,a,a+=r);return 7&a&&(a=1+(7|a)),s}}},function(e,t,r){"use strict";e.exports=n;var o=r(1);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return i;var t=e<0;t&&(e=-e);var r=e>>>0,o=(e-r)/4294967296>>>0;return t&&(o=~o>>>0,r=~r>>>0,++r>4294967295&&(r=0,++o>4294967295&&(o=0))),new n(r,o)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(o.isString(e)){if(!o.Long)return n.fromNumber(parseInt(e,10));e=o.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):i},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return o.Long?new o.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;n.fromHash=function(e){return e===a?i:new n((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},function(e,t,r){"use strict";e.exports=i;var o=r(2);(i.prototype=Object.create(o.prototype)).constructor=i;var n=r(1);function i(){o.call(this)}function a(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var o=0;o<e.length;)t[r++]=e[o++]}},i.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(i.writeBytesBuffer,t,e),this},i.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},i._configure()},function(e,t,r){"use strict";e.exports=i;var o=r(3);(i.prototype=Object.create(o.prototype)).constructor=i;var n=r(1);function i(e){o.call(this,e)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},i._configure()},function(e,t,r){"use strict";t.Service=r(18)},function(e,t,r){"use strict";e.exports=n;var o=r(1);function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");o.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(n.prototype=Object.create(o.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,r,n,i,a){if(!i)throw TypeError("request must be specified");var s=this;if(!a)return o.asPromise(e,s,t,r,n,i);if(s.rpcImpl)try{return s.rpcImpl(t,r[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,r){if(e)return s.emit("error",e,t),a(e);if(null!==r){if(!(r instanceof n))try{r=n[s.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return s.emit("error",e,t),a(e)}return s.emit("data",r,t),a(null,r)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(e,t,r){"use strict";e.exports={}},function(e,t,r){"use strict";r.r(t),r.d(t,"MESSAGEKEY_LINK",(function(){return p})),r.d(t,"MESSAGEKEY_REQUESTLINK",(function(){return h})),r.d(t,"MESSAGEKEY_ADDREGISTRY",(function(){return y})),r.d(t,"MESSAGEKEY_GOTREGISTRY",(function(){return d})),r.d(t,"MESSAGEKEY_RUNMETHOD",(function(){return w})),r.d(t,"HELPWORKERNAME",(function(){return b})),r.d(t,"HELPWORKERURL",(function(){return v})),r.d(t,"Export",(function(){return k})),r.d(t,"RemoteListener",(function(){return E})),r.d(t,"RPCEmitter",(function(){return _})),r.d(t,"RPCPeer",(function(){return O})),r.d(t,"LinkListener",(function(){return P}));var o,n=r(0),i=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(t,r){var o=e.call(this)||this;return o.key=t,r instanceof n.webworker_rpc.ExecutePacket?o.dataExecute=r:r instanceof n.webworker_rpc.RegistryPacket&&(o.dataRegistry=r),o}return i(t,e),t}(n.webworker_rpc.WebWorkerMessage),s=function(e){function t(t,r){var o=e.call(this)||this;return o.serviceName=t,o.executors=r,o}return i(t,e),t.checkType=function(e){if(!e)return!1;if(!("serviceName"in e))return!1;if("executors"in e){if(!Array.isArray(e.executors))return!1;if(e.executors.length>0)for(var t=0,r=e.executors;t<r.length;t++){var o=r[t];if(!u.checkType(o))return!1}}return!0},t}(n.webworker_rpc.RegistryPacket),c=function(e){function t(t,r,o,i,a){var s=e.call(this)||this;return s.header=new n.webworker_rpc.Header,s.header.serviceName=t,s.header.remoteExecutor=new n.webworker_rpc.Executor,s.header.remoteExecutor.method=r,o&&(s.header.remoteExecutor.context=o),i&&(s.header.remoteExecutor.params=i),a&&(s.header.callbackExecutor=a),s}return i(t,e),t.checkType=function(e){if(!e)return!1;if(!("header"in e))return!1;var t=e.header;if(!("serviceName"in t))return!1;if(!("remoteExecutor"in t))return!1;var r=t.remoteExecutor;return!!u.checkType(r)},t}(n.webworker_rpc.ExecutePacket),u=function(e){function t(t,r,o){var n=e.call(this)||this;return n.method=t,r&&(n.context=r),o&&(n.params=o),n}return i(t,e),t.checkType=function(e){if(!e)return!1;if(!("method"in e))return!1;if("params"in e){if(!Array.isArray(e.params))return!1;if(e.params.length>0)for(var t=0,r=e.params;t<r.length;t++){var o=r[t];if(!l.checkType(o))return!1}}return!0},t}(n.webworker_rpc.Executor),l=function(e){function t(t,r){var o=e.call(this)||this;if(o.t=t,r)switch(t){case n.webworker_rpc.ParamType.str:if("string"!=typeof r)return console.error(r+" is not type of string"),o;o.valStr=r;break;case n.webworker_rpc.ParamType.boolean:if("boolean"!=typeof r)return console.error(r+" is not type of boolean"),o;o.valBool=r;break;case n.webworker_rpc.ParamType.num:if("number"!=typeof r)return console.error(r+" is not type of number"),o;o.valNum=r;break;case n.webworker_rpc.ParamType.unit8array:if(r.constructor!==Uint8Array)return console.error(r+" is not type of Uint8Array"),o;o.valBytes=r;break;case n.webworker_rpc.ParamType.executor:if(!(r instanceof n.webworker_rpc.Executor))return console.error(r+" is not type of Executor"),o;o.valExecutor=r;break;default:console.error("unkonw type : ",t)}return o}return i(t,e),t.checkType=function(e){return!!e&&"t"in e},t.typeOf=function(e){return"string"==typeof e?n.webworker_rpc.ParamType.str:"boolean"==typeof e?n.webworker_rpc.ParamType.boolean:"number"==typeof e?n.webworker_rpc.ParamType.num:e.constructor===Uint8Array?n.webworker_rpc.ParamType.unit8array:e instanceof n.webworker_rpc.Executor?n.webworker_rpc.ParamType.executor:n.webworker_rpc.ParamType.UNKNOWN},t}(n.webworker_rpc.Param),f=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),p="link",h="requestLink",y="addRegistry",d="gotRegistry",w="runMethod",b="__HELPER",v="./helper.worker.js",m=[],g=new Map;function k(e){return function(t,r,o){var n=t.constructor.name;g.has(n)||g.set(n,t);var i=[];if(e)for(var a=0,s=e;a<s.length;a++){var c=s[a];i.push(new l(c))}i.length>0?m.push(new u(r,n,i)):m.push(new u(r,n))}}var x=new Map;function E(e,t,r,o){return function(n,i,a){var s=n.constructor.name;g.has(s)||g.set(s,n);var c=[];if(o)for(var f=0,p=o;f<p.length;f++){var h=p[f];c.push(new l(h))}c.length>0?m.push(new u(i,s,c)):m.push(new u(i,s));var y=null;y=c.length>0?new u(i,s,c):new u(i,s),x.has(e)||x.set(e,[]),x.get(e).push({context:t,event:r,executor:y})}}var _=function(){function e(){this.emitFunctions=new Map,g.set(this.constructor.name,this),m.push(new u("on",this.constructor.name,[new l(n.webworker_rpc.ParamType.str),new l(n.webworker_rpc.ParamType.executor),new l(n.webworker_rpc.ParamType.str)])),m.push(new u("off",this.constructor.name,[new l(n.webworker_rpc.ParamType.str)]))}return e.prototype.on=function(e,t,r){this.emitFunctions.has(e)||this.emitFunctions.set(e,[]),this.emitFunctions.get(e).push({worker:r,executor:t})},e.prototype.off=function(e,t,r){if(this.emitFunctions.has(e))if(t&&t instanceof u&&r&&"string"==typeof r){var o=this.emitFunctions.get(e),n=o.findIndex((function(e){return e.worker===r&&e.executor===t}));n>0&&o.splice(n,0)}else this.emitFunctions.delete(e)},e.prototype.emit=function(e){for(var t,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(this.emitFunctions.has(e))if(O.getInstance())for(var n=this.emitFunctions.get(e),i=0,a=n;i<a.length;i++){var s=a[i];s.worker in O.getInstance().remote&&(t=O.getInstance().remote[s.worker][s.executor.context])[s.executor.method].apply(t,r)}else console.error("no peer created")},e}(),O=function(e){function t(r,o){var n=e.call(this)||this;return t._instance?(console.error("duplicate RPCPeer created"),n):(t._instance=n,r?(n.name=r,n.worker=o||self,n.registry=new Map,n.channels=new Map,n.linkListeners=new Map,n.worker.onmessage=n.onMessage_Link,n):(console.error("param <name> error"),n))}return f(t,e),t.getInstance=function(){return t._instance},t.prototype.linkTo=function(e,t){if(!this.channels.has(b)){var r=new Worker(v),o=new MessageChannel;r.postMessage({key:p,workers:[this.name]},[o.port2]),this.addLink(b,o.port1)}if(this.linkListeners.has(e))return console.warn("already requested link to "+e),this.linkListeners.get(e);var n=new P(this.name,e);return this.linkListeners.set(e,n),this.channels.get(b).postMessage({key:h,serviceName:this.name,workerName:e,workerUrl:t}),n},t.prototype.linkToWorker=function(e,t){var r=new P(this.name,e);this.linkListeners.set(e,r);var o=new MessageChannel;return t.postMessage({key:p,workers:[this.name]},[o.port2]),this.addLink(e,o.port1),r},t.prototype.addLink=function(e,t){var r=this;this.channels.has(e)||(this.channels.set(e,t),t.onmessage=function(e){var t=e.data.key;if(t)switch(t){case p:r.onMessage_Link(e);break;case h:r.onMessage_RequestLink(e);break;case y:r.onMessage_AddRegistry(e);break;case d:r.onMessage_GotRegistry(e);break;case w:r.onMessage_RunMethod(e)}},this.postRegistry(e,new s(this.name,m)))},t.prototype.execute=function(e,t){if(this.registry.has(e)){var r=this.registry.get(e).find((function(e){return e.context===t.header.remoteExecutor.context&&e.method===t.header.remoteExecutor.method}));if(r){var o=r.params,i=t.header.remoteExecutor.params;if(o&&o.length>0){if(!i||0===i.length)return void console.error("execute param error! ","param.length = 0");if(o.length>i.length)return void console.error("execute param error! ","param not enough");for(var s=0;s<o.length;s++){var c=o[s],u=i[s];if(c.t!==u.t)return void console.error("execute param error! ","type not match, registry: <",c.t,">; execute: <",u.t,">")}}var l=new a(w,t),f=n.webworker_rpc.WebWorkerMessage.encode(l).finish().buffer;this.channels.has(e)&&this.channels.get(e).postMessage(l,[].concat(f.slice(0)))}else console.error("method <"+t.header.remoteExecutor.method+"> not registed")}else console.error("worker <"+e+"> not registed")},t.prototype.postRegistry=function(e,t){if(e!==b){var r=new a(y,t),o=n.webworker_rpc.WebWorkerMessage.encode(r).finish().buffer;if(this.channels.has(e))this.channels.get(e).postMessage(r,[].concat(o.slice(0)))}},t.prototype.onMessage_Link=function(e){var t=e.data.key;if(t&&t===p)for(var r=e.data.workers,o=e.ports,n=0;n<o.length;n++){var i=o[n],a=r[n];this.addLink(a,i)}},t.prototype.onMessage_RequestLink=function(e){var t=e.data,r=t.serviceName,o=t.workerName,n=t.workerUrl,i=new MessageChannel;if(this.channels.has(r))if(this.channels.get(r).postMessage({key:p,workers:[o]},[i.port1]),this.channels.has(o))this.channels.get(o).postMessage({key:p,workers:[r]},[i.port2]);else{if(!n)return void console.error("worker url undefined");var a=new Worker(n),s=new MessageChannel;a.postMessage({key:p,workers:[this.name,r]},[s.port2,i.port2]),this.addLink(o,s.port1)}else console.error(this.name+" not yet link to "+r)},t.prototype.onMessage_AddRegistry=function(e){var t=e.data.dataRegistry;if(t)if(s.checkType(t)){var r=t;if(this.registry.set(r.serviceName,r.executors),this.addRegistryProperty(r),this.channels.has(r.serviceName))this.channels.get(r.serviceName).postMessage({key:d,worker:this.name});if(this.linkListeners.has(r.serviceName)&&this.linkListeners.get(r.serviceName).setPortReady(this.name),x.has(r.serviceName))for(var o=0,n=x.get(r.serviceName);o<n.length;o++){var i=n[o];this.remote[r.serviceName][i.context].on(i.event,i.executor,this.name)}}else console.warn("<data> type error: ",t);else console.warn("<data> not in ev.data")},t.prototype.onMessage_GotRegistry=function(e){var t=e.data.worker;this.linkListeners.has(t)&&this.linkListeners.get(t).setPortReady(t)},t.prototype.onMessage_RunMethod=function(e){var t=this,r=e.data.dataExecute;if(r)if(c.checkType(r)){var o=r,i=o.header.remoteExecutor,a=[];if(i.params)for(var s=0,u=i.params;s<u.length;s++){var f=u[s];switch(f.t){case n.webworker_rpc.ParamType.boolean:a.push(f.valBool);break;case n.webworker_rpc.ParamType.num:a.push(f.valNum);break;case n.webworker_rpc.ParamType.str:a.push(f.valStr);break;case n.webworker_rpc.ParamType.unit8array:a.push(f.valBytes);break;case n.webworker_rpc.ParamType.executor:a.push(f.valExecutor)}}var p=this.executeFunctionByName(i.method,i.context,a);p&&p instanceof Promise&&p.then((function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i=[],a=0,s=e;a<s.length;a++){var u=s[a],f=l.typeOf(u);f!==n.webworker_rpc.ParamType.UNKNOWN&&i.push(new l(f,u))}if(o.header.callbackExecutor){var p=o.header.callbackExecutor;if(p.params){if(i.length<p.params.length)return void console.error("not enough data from promise");for(var h=0;h<p.params.length;h++){var y=p.params[h],d=i[h];if(y.t!==d.t)return void console.error("param type not match: <"+y.t+"> <"+d.t+">")}t.execute(o.header.serviceName,new c(t.name,p.method,p.context,i))}else t.execute(o.header.serviceName,new c(t.name,p.method,p.context))}}))}else console.warn("<data> type error: ",r);else console.warn("<data> not in ev.data")},t.prototype.executeFunctionByName=function(e,t,r){if(!g.has(t))return console.error("no context exit: ",t),null;var o=g.get(t);return o[e].apply(o,r)},t.prototype.addRegistryProperty=function(e){for(var t=this,r=e.serviceName,o=e.executors,i={},a=function(e){e.context in i||N(i,e.context,{}),N(i[e.context],e.method,(function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a=[],s=null;if(o)for(var u=0,f=o;u<f.length;u++){var p=f[u],h=l.typeOf(p);h!==n.webworker_rpc.ParamType.UNKNOWN?a.push(new l(h,p)):console.warn("unknown param type: ",p)}s?t.execute(r,new c(t.name,e.method,e.context,a,s)):t.execute(r,new c(t.name,e.method,e.context,a))}))},s=0,u=o;s<u.length;s++){a(u[s])}this.remote||(this.remote={}),N(this.remote,r,i)},t}(_),P=function(){function e(e,t){this.port1="",this.port2="",this.port1Ready=!1,this.port2Ready=!1,this.port1=e,this.port2=t}return e.prototype.onReady=function(e){this.readyFunc=e},e.prototype.setPortReady=function(e){this.port1!==e&&this.port2!==e||(this.port1Ready||(this.port1Ready=this.port1===e),this.port2Ready||(this.port2Ready=this.port2===e),this.port1Ready&&this.port2Ready&&this.readyFunc&&this.readyFunc())},e}();function N(e,t,r){return t in e?(console.error("key exits, add property failed!",e,t),e):(e[t]=r,e)}}]);